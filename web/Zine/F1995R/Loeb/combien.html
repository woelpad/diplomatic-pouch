<html> <head>
<title>DP F1995R: How many possible moves are there in a
retreat phase?</title>
</head>
<BODY BGCOLOR="#ffffff">
<A HREF="/Zine/"><IMG align=left SRC="/Zine/Common/DPbutton.gif" border=0></A>
<A HREF="/Zine/F1995R/"><IMG align=right SRC="/Zine/Common/toF1995R.gif" border=0></A>
<BR><BR><HR>
<h1>
<center>
How Many Possible Moves<BR>
Are There in a Retreat Phase?</center></h1>
<hr>
<h2>Number of Dislodgements</h2>
To force a retreat or a disband, the unit must be attacked by
at least two units. Neither the unit retreating nor the two units
attacking it
may be one of the two attackers of some other retreating unit.
Thus, each retreat or disband requires three distinct units.
Given that there are only 34 supply centers on the board, and therefore
at most 34 units present at any one time, only <b>11</b>
dislodgements can occur simultaneously.
(It should be clear that
the 11 units dislodged might even all belong to the same player.)
<p>
An example clearly shows that these 11 dislodgements could easily
<a href="example1.html">all be forced disbands!</a>  They may also
all eleven be ordinary retreats, and we shall be leading up to an example
where the number of possibilities for these 11 retreats is maximized.
<h2>In the beginning, ...</h2>
Actually, in 1901, there are only 22 units on the board, so by similar
reasoning to that above, there can be no more than 7 simultaneous
retreats in 1901.
<p>
We can say much more than that.
In Spring 1901, no unit
may be dislodged, since no unit borders upon two others. (In fact,
only <i>F Tri</i> and <i>A Ven</i> border at all!)
<p>
In Fall 1901, there can be at most six dislodgements.
<ul>
<li> How can that be done?
<li> Why can't there be seven?
</ul>
Try to resolve these questions yourself before peeking at <a
href="example3.html">the answers</a>.
<h3>Open Questions</h3>
<ul>
<li> Try to do a similar analysis for Spring 1902. (Best answers to
appear in the S1996R issue.)
<li> How about Fall 1902? ...
<li> When is the earliest turn for which 11 dislodgements are
possible?
</ul>
<h2>Maximum Number of Combinations</h2>
In order to search for the best retreat, we must consider all
possible <b>combinations</b> of retreats.
The worst case to
consider must not only have a large number of units retreating
simultaneously, but each unit must have a large number of possible
retreats.
<p>
According to the <a href="rules.html">rules</a>,
a unit must retreat to: "<i>a space to
which it could ordinarily move if unopposed by
other units</i>.... <i>The unit may not retreat, however, to any space
which is occupied, nor to the space its attacker
came from</i>...." At least one neighboring space is sure to be
occupied. (The one which supported the attack.)
Thus, the number of legal retreats is two fewer than
the number of legal moves <b>unless</b> the support and/or the attack
came from a space to which the attacked unit could not legally move.
(For example, a fleet on a coastal province can be attacked from an
inland province, or an army can be attacked from off-shore.)
<p>
Here is a list of the spaces from which there are the most legal
moves. (Adjustments have been made for the exceptions mentioned
above.)
<hr>
<h3><center>Spaces With Many Retreat Possibilities</h3>
<table border=2 cellpadding=2 cellspacing=0>
<TR><TD align=center><B>Unit</B>
<TD align=center><B>Neighbors</B><TD align=center><B>Max # Retreats</B></TR>
<TR><TD align=center>F NTH
<TD align=center>yor edi nwg nor ska den hel hol bel eng lon
<TD align=center>9</TR>
<TR><TD align=center>F MAO
<TD align=center>nao iri eng bre gas spa por spa naf wes<TD align=center>8</TR>
<TR><TD align=center>F ION
<TD align=center>tun tys nap apu adr alb gre aeg eas<TD align=center>7</TR>
<TR><TD align=center>F ENG
<TD align=center>mao iri wal lon nth bel pic bre<TD align=center>6</TR>
<TR><TD align=center>F BAL
<TD align=center>lvn pru ber kie den swe bot<TD align=center>5</TR>
<TR><TD align=center>A BUR
<TD align=center>mar gas par pic bel ruh mun<TD align=center>5</TR>
<TR><TD align=center>A GAL
<TD align=center>war ukr rum bud vie boh sil<TD align=center>5</TR>
<TR><TD align=center>A MUN
<TD align=center>bur ruh kie ber sil boh tyr<TD align=center>5</TR>
<TR><TD align=center>F TYS
<TD align=center>wes lyo tus rom nap ion tun<TD align=center>5</TR>
<TR><TD align=center>F NOR
<TD align=center>ska nth nwg bar stp swe
<TD align=center>5 (if attacked from Fin)</TR>
<TR><TD align=center>A RUM
<TD align=center>ser bud gal ukr sev bul
<TD align=center>5 (if attacked from BLA)</TR>
<TR><TD align=center>A TRI
<TD align=center>tyr vie bud ser alb ven
<TD align=center>5 (if attacked from ADR)</TR>
<TR><TD align=center>A VEN
<TD align=center>tyr tus rom pie apu tri
<TD align=center>5 (if attacked from ADR)</TR>
</table><P>
(If we also included the possibility of disbanding,<BR> then each unit
would have one more retreat option than listed above.)<p>
</center>
Any other unit would have at most four possible retreats
regardless of where it was attacked from. (Exactly four retreats
in the case of <i>F Aeg, F Bla, A Con, F Den, F Lyo, F Nwg, A Ser, A Sil,
F Swe, A Tyr, A War</i>, and <i>F Wes</i>. Also, <i>U Kie</i>, and
<i>F Spa/sc</i> if attacked from certain neighbors.)
<hr>
Choosing, then, the eleven units with the most retreat possibities from off
the list shown above, for the purposes of arranging for all these units to
be dislodged at once,
we might thus hope for a total of 9x8x7x6x5x5x5x5x5x5x5 = 236,250,000
possibilities. (Or 1,410,877,440 including the possibility of disbanding.)
<p>
<p>
However, certain of these spaces are adjacent to each other.  To wit:
<ul>
<li> MAO <-> Eng <-> Nth <- Nor
<li> Bur <-> Mun
<li> Gal <-> Rum
<li> Ven <-> Tri
<li> Ion <-> TyS
</ul>
Obviously, a unit retreating from one of these spaces limits the choices of a
neighboring retreating unit.
Similarly, a unit <i>A</i> supporting <i>B</i> in an attack on a unit
<i>C</i> could conceivably
limit the retreat choices of some  unit <i>D</i>.
Thus, we can not attain the total of 236,250,000 possible retreat
combinations.
<p>
Note that if both <i>A Tri</i> and <i>A Ven</i> are used, then
one would only have 3 retreats, so let's just use <i>A Tri</i>.
Now, eliminate the units Eng/Mun/Gal/TyS whose adjacencies to other
units chosen for placement would have lowered
the number of possible retreats for each of them to four. Replace them
with some units with four possible retreats (<i>Lyo, Con,</i> and <i>War</i>)
which are not adjacent to any other unit to be forced into retreat.
<p>
The <a href="example2.html">resulting configuration</a> has no
adjacent units except for Norway-North Sea. These two units thus have,
between them, (9-1)*(5-1)=32 possible retreats.
<P>
Replacing Norway with some other unit with 4 retreats would give 9*4 =
36 possible retreats. (Counting the possibility of disbanding, the
comparison is 9*5 = 45 against 10*5 = 50.)  So moving the Norway dislodgement
to another location from which four retreats are possible would indeed
improve the total.  However, we see that all such locations
(<i>F Swe, A Tyr, A War, F Wes, U Kie</i>, and <i>F Spa/sc</i>) are
either occupied by an attacker and/or placement of the Norway unit there
would reduce the number of available retreats for another dislodged unit
(just as placing it in Norway does for North Sea).
<P>
We then observe that
to achieve the largest end result, however, it is best to reduce the retreat
possibilities from the unit which itself has the greatest number of
possibilities.  For example,
consider a situation in which one unit can retreat to five uncontested
spaces and a second unit can retreat to four uncontested spaces.  Now add the
fact that you must add a third dislodged unit, but by whose placement you
must eliminate one of the retreat possibilities for one of the other two
units.  It becomes clear that this third unit should be placed such that the
unit which can retreat to five spaces should be reduced to only four
possibilities, rather than placing it such that the unit which can retreat
to four spaces be reduced to only three.  (In other words, if <i>A</i> is the
number of uncontested retreats for the third unit, your choice is to go from
5x4=20 in the initial situation to either 4x4x<i>A</i>=16<i>A</i> or
5x3x<i>A</i>=15<i>A</i>.)
<p>
From this, we can conclude that placement of the eleventh dislodged unit in
Norway (where it takes the ninth available retreat away from North Sea) offers
more possibilities than would placing this dislodgement anywhere else on the
board.
<p>
Note also that in the proposed solution
the units attacking a given unit do not hinder or constrain the
retreats of any other units.
<P>
Thus, the solution is optimal and leads to
8x8x7x5x5x5x5x4x4x4x4 = <b>71,680,000</b> possible retreat
combinations, and <b>524,880,000</b> when you include disbands.
Of course, the number of resulting <i>positions</i> is considerably
smaller due to the shared retreat
locations (that is, although the fleets in the Gulf of Lyon and the
Mid-Atlantic are both eligible to retreat to the south coast of Spain,
only one of them, at most, may do so).
<H3>Open Problems</H3>
<ul>
<li>Calculate the number of unique board positions which could result
from the situation described; in other words, reduce the figures given
above by accounting for the shared
retreat spaces.  (Best answer to appear in an update of this
column.)
<li>How many retreat combinations can appear in Fall 1901? (Best
answers to appear in an update of this column.)
<li>In Spring 1902? (Best answers to appear in the S1996R issue.)
<li>How about Fall 1902? ...
</ul>
Actually, positions with so many possible retreat combinations are
especially rare. It would be interesting to undertake a statistical
analysis of game histories with regard to the number of units
retreating at one time, and how many legal retreat combinations are
available. Any volunteers?
<hr>
Return to <a href="ret.html">main article</a>
<hr>
<A HREF="/Zine/"><IMG align=left SRC="/Zine/Common/DPbutton.gif" border=0></A>
<A HREF="/Zine/F1995R/"><IMG align=right SRC="/Zine/Common/toF1995R.gif" border=0></A>
<BR><BR>
</body>
</html>
<!--
-->